/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/conformidade/dashboard/[empresaId]/route";
exports.ids = ["app/api/conformidade/dashboard/[empresaId]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&page=%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute.ts&appDir=%2Fhome%2Fbrunoadsba%2Fsgn%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fbrunoadsba%2Fsgn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&page=%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute.ts&appDir=%2Fhome%2Fbrunoadsba%2Fsgn%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fbrunoadsba%2Fsgn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _home_brunoadsba_sgn_src_app_api_conformidade_dashboard_empresaId_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/conformidade/dashboard/[empresaId]/route.ts */ \"(rsc)/./src/app/api/conformidade/dashboard/[empresaId]/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/conformidade/dashboard/[empresaId]/route\",\n        pathname: \"/api/conformidade/dashboard/[empresaId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/conformidade/dashboard/[empresaId]/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/home/brunoadsba/sgn/src/app/api/conformidade/dashboard/[empresaId]/route.ts\",\n    nextConfigOutput,\n    userland: _home_brunoadsba_sgn_src_app_api_conformidade_dashboard_empresaId_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/conformidade/dashboard/[empresaId]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjb25mb3JtaWRhZGUlMkZkYXNoYm9hcmQlMkYlNUJlbXByZXNhSWQlNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNvbmZvcm1pZGFkZSUyRmRhc2hib2FyZCUyRiU1QmVtcHJlc2FJZCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNvbmZvcm1pZGFkZSUyRmRhc2hib2FyZCUyRiU1QmVtcHJlc2FJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGYnJ1bm9hZHNiYSUyRnNnbiUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRmJydW5vYWRzYmElMkZzZ24maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDdUM7QUFDekc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQs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Q0E7QUFDQTtBQUNBLDZDQUE2QywwRkFBcUI7QUFDbEU7QUFDQSxrQkFBa0IsNkVBQVk7QUFDOUI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQSw0Q0FBNEMsNkZBQWU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2JydW5vYWRzYmEvc2duL3NyYy9hcHAvYXBpL2NvbmZvcm1pZGFkZS9kYXNoYm9hcmQvW2VtcHJlc2FJZF0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbmZvcm1pZGFkZS9kYXNoYm9hcmQvW2VtcHJlc2FJZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb25mb3JtaWRhZGUvZGFzaGJvYXJkL1tlbXByZXNhSWRdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb25mb3JtaWRhZGUvZGFzaGJvYXJkL1tlbXByZXNhSWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2JydW5vYWRzYmEvc2duL3NyYy9hcHAvYXBpL2NvbmZvcm1pZGFkZS9kYXNoYm9hcmQvW2VtcHJlc2FJZF0vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9jb25mb3JtaWRhZGUvZGFzaGJvYXJkL1tlbXByZXNhSWRdL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&page=%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute.ts&appDir=%2Fhome%2Fbrunoadsba%2Fsgn%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fbrunoadsba%2Fsgn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/conformidade/dashboard/[empresaId]/route.ts":
/*!*****************************************************************!*\
  !*** ./src/app/api/conformidade/dashboard/[empresaId]/route.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\nconst revalidate = 60; // Cache por 1 minuto para dashboards (reduzido para melhor responsividade)\nasync function GET(request, { params }) {\n    const startTime = Date.now();\n    try {\n        const { empresaId } = await params;\n        const { searchParams } = new URL(request.url);\n        const periodo = searchParams.get(\"periodo\") || \"30\"; // dias\n        const incluirDetalhes = searchParams.get(\"incluir_detalhes\") === \"true\";\n        if (!empresaId) {\n            return Response.json({\n                success: false,\n                error: \"ID da empresa é obrigatório\"\n            }, {\n                status: 400,\n                headers: {\n                    \"Cache-Control\": \"no-store\"\n                }\n            });\n        }\n        // Verificar se empresa existe\n        const { data: empresa, error: empresaError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"empresas\").select(\"id, nome, cnpj, setor, porte, ativo\").eq(\"id\", empresaId).eq(\"ativo\", true).single();\n        if (empresaError || !empresa) {\n            return Response.json({\n                success: false,\n                error: \"Empresa não encontrada ou inativa\"\n            }, {\n                status: 404,\n                headers: {\n                    \"Cache-Control\": \"no-store\"\n                }\n            });\n        }\n        // Data de início para filtros\n        const dataInicio = new Date();\n        dataInicio.setDate(dataInicio.getDate() - parseInt(periodo));\n        const dataInicioISO = dataInicio.toISOString();\n        // 1. ESTATÍSTICAS DE JOBS (filtrados por empresa)\n        const { data: jobs, error: jobsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"analise_jobs\").select(\"id, status, created_at, completed_at, progresso, tipo_analise\").eq(\"empresa_id\", empresaId).gte(\"created_at\", dataInicioISO).order(\"created_at\", {\n            ascending: false\n        });\n        if (jobsError) {\n            return Response.json({\n                success: false,\n                error: \"Erro ao buscar jobs\"\n            }, {\n                status: 500,\n                headers: {\n                    \"Cache-Control\": \"no-store\"\n                }\n            });\n        }\n        // 2. ESTATÍSTICAS DE RESULTADOS\n        const { data: resultados, error: resultadosError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"analise_resultados\").select(\"id, score_geral, nivel_risco, status_geral, created_at, metadata\").eq(\"empresa_id\", empresaId).gte(\"created_at\", dataInicioISO).order(\"created_at\", {\n            ascending: false\n        });\n        if (resultadosError) {\n            return Response.json({\n                success: false,\n                error: \"Erro ao buscar resultados\"\n            }, {\n                status: 500,\n                headers: {\n                    \"Cache-Control\": \"no-store\"\n                }\n            });\n        }\n        // 3. GAPS DE CONFORMIDADE (Enterprise Defensive Query)\n        let gaps = [];\n        try {\n            const { data: gapsData, error: gapsQueryError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"conformidade_gaps\").select(`\n          id, \n          severidade, \n          resolvido, \n          created_at,\n          prazo_sugerido,\n          analise_resultado_id,\n          norma_id\n        `).gte(\"created_at\", dataInicioISO).order(\"severidade\", {\n                ascending: false\n            }).order(\"created_at\", {\n                ascending: false\n            });\n            if (gapsQueryError) {\n                console.warn('Aviso: Gaps query failed, continuando sem dados de gaps:', gapsQueryError);\n                gaps = [];\n            } else {\n                gaps = gapsData || [];\n            }\n            // Enriquecer com dados das normas (defensivo)\n            if (gaps.length > 0) {\n                const normaIds = [\n                    ...new Set(gaps.map((g)=>g.norma_id).filter((v)=>Boolean(v)))\n                ];\n                if (normaIds.length > 0) {\n                    const { data: normasData } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"normas\").select(\"id, codigo, titulo\").in(\"id\", normaIds);\n                    const normas = normasData || [];\n                    gaps = gaps.map((gap)=>({\n                            ...gap,\n                            norma: gap.norma_id ? normas.find((n)=>n.id === gap.norma_id) || null : null\n                        }));\n                }\n            }\n        } catch (err) {\n            console.warn('Aviso: Erro ao buscar gaps, continuando sem estes dados:', err);\n            gaps = [];\n        }\n        // 4. DOCUMENTOS DA EMPRESA\n        const { data: documentos, error: documentosError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"documentos_empresa\").select(\"id, nome_arquivo, tipo_documento, created_at\").eq(\"empresa_id\", empresaId).order(\"created_at\", {\n            ascending: false\n        });\n        if (documentosError) {\n            return Response.json({\n                success: false,\n                error: \"Erro ao buscar documentos\"\n            }, {\n                status: 500,\n                headers: {\n                    \"Cache-Control\": \"no-store\"\n                }\n            });\n        }\n        // CÁLCULOS DO DASHBOARD\n        const jobsRows = jobs || [];\n        const resultadosRows = resultados || [];\n        const documentosRows = documentos || [];\n        // Estatísticas de Jobs\n        const totalJobs = jobsRows.length;\n        const jobsPendentes = jobsRows.filter((j)=>j.status === 'pending').length;\n        const jobsProcessando = jobsRows.filter((j)=>j.status === 'running').length;\n        const jobsCompletos = jobsRows.filter((j)=>j.status === 'completed').length;\n        const jobsFalharam = jobsRows.filter((j)=>j.status === 'failed').length;\n        const jobsCancelados = jobsRows.filter((j)=>j.status === 'cancelled').length;\n        const taxaSucesso = totalJobs > 0 ? Math.round(jobsCompletos / totalJobs * 100) : 0;\n        const jobsComTempo = jobsRows.filter((j)=>j.completed_at && j.created_at);\n        const tempoMedio = jobsComTempo.length > 0 ? Math.round(jobsComTempo.reduce((acc, job)=>{\n            const inicio = new Date(job.created_at).getTime();\n            const fim = new Date(job.completed_at).getTime();\n            return acc + (fim - inicio) / 1000;\n        }, 0) / jobsComTempo.length) : 0;\n        // Estatísticas de Conformidade\n        const totalAnalises = resultadosRows.length;\n        const scoreGeral = totalAnalises > 0 ? Math.round(resultadosRows.reduce((acc, r)=>acc + (r.score_geral || 0), 0) / totalAnalises) : 0;\n        const conformes = resultadosRows.filter((r)=>r.status_geral === 'conforme').length;\n        const naoConformes = resultadosRows.filter((r)=>r.status_geral === 'nao_conforme').length;\n        const parcialConformes = resultadosRows.filter((r)=>r.status_geral === 'parcial_conforme').length;\n        const riscoBaixo = resultadosRows.filter((r)=>r.nivel_risco === 'baixo').length;\n        const riscoMedio = resultadosRows.filter((r)=>r.nivel_risco === 'medio').length;\n        const riscoAlto = resultadosRows.filter((r)=>r.nivel_risco === 'alto').length;\n        const riscoCritico = resultadosRows.filter((r)=>r.nivel_risco === 'critico').length;\n        // Estatísticas de Gaps (usando dados de alertas como fallback)\n        let totalGaps = gaps.length;\n        let gapsResolvidos = gaps.filter((g)=>g.resolvido).length;\n        let gapsPendentes = totalGaps - gapsResolvidos;\n        let gapsCriticos = gaps.filter((g)=>g.severidade === 'critica').length;\n        let gapsAltos = gaps.filter((g)=>g.severidade === 'alta').length;\n        let gapsMedios = gaps.filter((g)=>g.severidade === 'media').length;\n        let gapsBaixos = gaps.filter((g)=>g.severidade === 'baixa').length;\n        // Usar dados de alertas como fonte principal (mais confiável)\n        const { data: alertasData } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"alertas_conformidade\").select(\"severidade, status\").eq(\"empresa_id\", empresaId);\n        if (alertasData && alertasData.length > 0) {\n            totalGaps = alertasData.length;\n            gapsResolvidos = alertasData.filter((a)=>a.status === 'resolvido').length;\n            gapsPendentes = alertasData.filter((a)=>a.status === 'ativo').length;\n            gapsCriticos = alertasData.filter((a)=>a.severidade === 'critica').length;\n            gapsAltos = alertasData.filter((a)=>a.severidade === 'alta').length;\n            gapsMedios = alertasData.filter((a)=>a.severidade === 'media').length;\n            gapsBaixos = alertasData.filter((a)=>a.severidade === 'baixa').length;\n        }\n        const gapsPorCategoria = gaps.reduce((acc, gap)=>{\n            const categoria = gap.categoria || 'Sem categoria';\n            acc[categoria] = (acc[categoria] || 0) + 1;\n            return acc;\n        }, {});\n        const ultimosResultados = resultadosRows.slice(0, 10);\n        const tendenciaScore = ultimosResultados.map((r)=>({\n                data: r.created_at,\n                score: r.score_geral || 0,\n                nivel_risco: r.nivel_risco\n            }));\n        const documentosPorTipo = documentosRows.reduce((acc, doc)=>{\n            acc[doc.tipo_documento] = (acc[doc.tipo_documento] || 0) + 1;\n            return acc;\n        }, {});\n        // Dashboard consolidado\n        const dashboard = {\n            empresa,\n            periodo_dias: parseInt(periodo),\n            data_inicio: dataInicioISO,\n            ultima_atualizacao: new Date().toISOString(),\n            resumo_executivo: {\n                score_geral_medio: scoreGeral,\n                total_analises: totalAnalises,\n                total_gaps: totalGaps,\n                gaps_criticos_pendentes: gaps.filter((g)=>g.severidade === 'critica' && !g.resolvido).length,\n                taxa_resolucao_gaps: totalGaps > 0 ? Math.round(gapsResolvidos / totalGaps * 100) : 0,\n                risco_predominante: getRiscoPredominante(riscoBaixo, riscoMedio, riscoAlto, riscoCritico)\n            },\n            processamento: {\n                total_jobs: totalJobs,\n                jobs_pendentes: jobsPendentes,\n                jobs_processando: jobsProcessando,\n                jobs_completos: jobsCompletos,\n                jobs_falharam: jobsFalharam,\n                jobs_cancelados: jobsCancelados,\n                taxa_sucesso_percentual: taxaSucesso,\n                tempo_medio_processamento_segundos: tempoMedio,\n                tempo_medio_formatado: formatarTempo(tempoMedio)\n            },\n            conformidade: {\n                total_analises: totalAnalises,\n                score_medio: scoreGeral,\n                distribuicao_status: {\n                    conforme: conformes,\n                    nao_conforme: naoConformes,\n                    parcial_conforme: parcialConformes\n                },\n                distribuicao_risco: {\n                    baixo: riscoBaixo,\n                    medio: riscoMedio,\n                    alto: riscoAlto,\n                    critico: riscoCritico\n                },\n                tendencia_score: tendenciaScore\n            },\n            gaps: {\n                total: totalGaps,\n                resolvidos: gapsResolvidos,\n                pendentes: gapsPendentes,\n                taxa_resolucao_percentual: totalGaps > 0 ? Math.round(gapsResolvidos / totalGaps * 100) : 0,\n                distribuicao_severidade: {\n                    critica: gapsCriticos,\n                    alta: gapsAltos,\n                    media: gapsMedios,\n                    baixa: gapsBaixos\n                },\n                por_categoria: gapsPorCategoria\n            },\n            documentos: {\n                total: documentosRows.length,\n                por_tipo: documentosPorTipo\n            }\n        };\n        const payload = {\n            success: true,\n            data: {\n                ...dashboard,\n                ...incluirDetalhes ? {\n                    detalhes: {\n                        jobs_recentes: jobsRows.slice(0, 10),\n                        resultados_recentes: resultadosRows.slice(0, 10),\n                        gaps_criticos_pendentes: gaps.filter((g)=>g.severidade === 'critica' && !g.resolvido).slice(0, 20),\n                        documentos_recentes: documentosRows.slice(0, 10)\n                    }\n                } : {}\n            }\n        };\n        const responseTime = Date.now() - startTime;\n        console.log(`Dashboard API response time: ${responseTime}ms for empresa ${empresaId}`);\n        return Response.json(payload, {\n            headers: {\n                \"Cache-Control\": \"public, s-maxage=60, stale-while-revalidate=300\",\n                \"X-Response-Time\": `${responseTime}ms`\n            }\n        });\n    } catch (error) {\n        console.error('Erro no dashboard de conformidade:', error);\n        return Response.json({\n            success: false,\n            error: \"Erro interno do servidor\"\n        }, {\n            status: 500,\n            headers: {\n                \"Cache-Control\": \"no-store\"\n            }\n        });\n    }\n}\n// Funções utilitárias\nfunction getRiscoPredominante(baixo, medio, alto, critico) {\n    const riscos = {\n        baixo,\n        medio,\n        alto,\n        critico\n    };\n    const maiorRisco = Object.entries(riscos).reduce((a, b)=>a[1] > b[1] ? a : b);\n    return maiorRisco[0];\n}\nfunction formatarTempo(segundos) {\n    if (segundos === 0) return \"0s\";\n    const horas = Math.floor(segundos / 3600);\n    const minutos = Math.floor(segundos % 3600 / 60);\n    const segs = segundos % 60;\n    if (horas > 0) {\n        return `${horas}h ${minutos}m`;\n    } else if (minutos > 0) {\n        return `${minutos}m ${segs}s`;\n    } else {\n        return `${segs}s`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jb25mb3JtaWRhZGUvZGFzaGJvYXJkL1tlbXByZXNhSWRdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUVuQyxNQUFNQyxhQUFhLEdBQUcsQ0FBQywyRUFBMkU7QUF5Q2xHLGVBQWVDLElBQ3BCQyxPQUFnQixFQUNoQixFQUFFQyxNQUFNLEVBQThDO0lBRXRELE1BQU1DLFlBQVlDLEtBQUtDLEdBQUc7SUFFMUIsSUFBSTtRQUNGLE1BQU0sRUFBRUMsU0FBUyxFQUFFLEdBQUcsTUFBTUo7UUFDNUIsTUFBTSxFQUFFSyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJUCxRQUFRUSxHQUFHO1FBQzVDLE1BQU1DLFVBQVVILGFBQWFJLEdBQUcsQ0FBQyxjQUFjLE1BQU0sT0FBTztRQUM1RCxNQUFNQyxrQkFBa0JMLGFBQWFJLEdBQUcsQ0FBQyx3QkFBd0I7UUFFakUsSUFBSSxDQUFDTCxXQUFXO1lBQ2QsT0FBT08sU0FBU0MsSUFBSSxDQUFDO2dCQUNuQkMsU0FBUztnQkFDVEMsT0FBTztZQUNULEdBQUc7Z0JBQUVDLFFBQVE7Z0JBQUtDLFNBQVM7b0JBQUUsaUJBQWlCO2dCQUFXO1lBQUU7UUFDN0Q7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTSxFQUFFQyxNQUFNQyxPQUFPLEVBQUVKLE9BQU9LLFlBQVksRUFBRSxHQUFHLE1BQU12QixtREFBUUEsQ0FDMUR3QixJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLHVDQUNQQyxFQUFFLENBQUMsTUFBTWxCLFdBQ1RrQixFQUFFLENBQUMsU0FBUyxNQUNaQyxNQUFNO1FBRVQsSUFBSUosZ0JBQWdCLENBQUNELFNBQVM7WUFDNUIsT0FBT1AsU0FBU0MsSUFBSSxDQUFDO2dCQUNuQkMsU0FBUztnQkFDVEMsT0FBTztZQUNULEdBQUc7Z0JBQUVDLFFBQVE7Z0JBQUtDLFNBQVM7b0JBQUUsaUJBQWlCO2dCQUFXO1lBQUU7UUFDN0Q7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTVEsYUFB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aUgscUJBQXFCbUIsS0FBYSxFQUFFQyxLQUFhLEVBQUVDLElBQVksRUFBRUMsT0FBZTtJQUN2RixNQUFNb0IsU0FBUztRQUFFdkI7UUFBT0M7UUFBT0M7UUFBTUM7SUFBUTtJQUM3QyxNQUFNcUIsYUFBYUMsT0FBT0MsT0FBTyxDQUFDSCxRQUFRNUYsTUFBTSxDQUFDLENBQUM2QixHQUFHbUUsSUFBTW5FLENBQUMsQ0FBQyxFQUFFLEdBQUdtRSxDQUFDLENBQUMsRUFBRSxHQUFHbkUsSUFBSW1FO0lBQzdFLE9BQU9ILFVBQVUsQ0FBQyxFQUFFO0FBQ3RCO0FBRUEsU0FBU2hDLGNBQWNvQyxRQUFnQjtJQUNyQyxJQUFJQSxhQUFhLEdBQUcsT0FBTztJQUUzQixNQUFNQyxRQUFReEcsS0FBS3lHLEtBQUssQ0FBQ0YsV0FBVztJQUNwQyxNQUFNRyxVQUFVMUcsS0FBS3lHLEtBQUssQ0FBQyxXQUFZLE9BQVE7SUFDL0MsTUFBTUUsT0FBT0osV0FBVztJQUV4QixJQUFJQyxRQUFRLEdBQUc7UUFDYixPQUFPLEdBQUdBLE1BQU0sRUFBRSxFQUFFRSxRQUFRLENBQUMsQ0FBQztJQUNoQyxPQUFPLElBQUlBLFVBQVUsR0FBRztRQUN0QixPQUFPLEdBQUdBLFFBQVEsRUFBRSxFQUFFQyxLQUFLLENBQUMsQ0FBQztJQUMvQixPQUFPO1FBQ0wsT0FBTyxHQUFHQSxLQUFLLENBQUMsQ0FBQztJQUNuQjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9icnVub2Fkc2JhL3Nnbi9zcmMvYXBwL2FwaS9jb25mb3JtaWRhZGUvZGFzaGJvYXJkL1tlbXByZXNhSWRdL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlXCI7XG5cbmV4cG9ydCBjb25zdCByZXZhbGlkYXRlID0gNjA7IC8vIENhY2hlIHBvciAxIG1pbnV0byBwYXJhIGRhc2hib2FyZHMgKHJlZHV6aWRvIHBhcmEgbWVsaG9yIHJlc3BvbnNpdmlkYWRlKVxuXG50eXBlIEpvYlJvdyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgc3RhdHVzOiAncGVuZGluZycgfCAncnVubmluZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnIHwgJ2NhbmNlbGxlZCc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgY29tcGxldGVkX2F0OiBzdHJpbmcgfCBudWxsO1xuICBwcm9ncmVzc286IG51bWJlciB8IG51bGw7XG4gIHRpcG9fYW5hbGlzZT86IHN0cmluZyB8IG51bGw7XG59O1xuXG50eXBlIFJlc3VsdGFkb1JvdyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgc2NvcmVfZ2VyYWw/OiBudW1iZXIgfCBudWxsO1xuICBuaXZlbF9yaXNjbz86ICdiYWl4bycgfCAnbWVkaW8nIHwgJ2FsdG8nIHwgJ2NyaXRpY28nIHwgbnVsbDtcbiAgc3RhdHVzX2dlcmFsPzogJ2NvbmZvcm1lJyB8ICduYW9fY29uZm9ybWUnIHwgJ3BhcmNpYWxfY29uZm9ybWUnIHwgbnVsbDtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBtZXRhZGF0YT86IHVua25vd247XG59O1xuXG50eXBlIERvY3VtZW50b1JvdyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbm9tZV9hcnF1aXZvOiBzdHJpbmc7XG4gIHRpcG9fZG9jdW1lbnRvOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn07XG5cbnR5cGUgTm9ybWFSZWYgPSB7IGlkOiBzdHJpbmc7IGNvZGlnbzogc3RyaW5nOyB0aXR1bG86IHN0cmluZyB9O1xuXG50eXBlIEdhcFJvdyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgc2V2ZXJpZGFkZTogJ2JhaXhhJyB8ICdtZWRpYScgfCAnYWx0YScgfCAnY3JpdGljYSc7XG4gIHJlc29sdmlkbzogYm9vbGVhbjtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBwcmF6b19zdWdlcmlkbzogc3RyaW5nIHwgbnVsbDtcbiAgYW5hbGlzZV9yZXN1bHRhZG9faWQ6IHN0cmluZztcbiAgbm9ybWFfaWQ6IHN0cmluZyB8IG51bGw7XG4gIGNhdGVnb3JpYT86IHN0cmluZyB8IG51bGw7XG4gIG5vcm1hPzogTm9ybWFSZWYgfCBudWxsO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxdWVzdDogUmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyBlbXByZXNhSWQ6IHN0cmluZyB9PiB9XG4pIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyBlbXByZXNhSWQgfSA9IGF3YWl0IHBhcmFtcztcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgcGVyaW9kbyA9IHNlYXJjaFBhcmFtcy5nZXQoXCJwZXJpb2RvXCIpIHx8IFwiMzBcIjsgLy8gZGlhc1xuICAgIGNvbnN0IGluY2x1aXJEZXRhbGhlcyA9IHNlYXJjaFBhcmFtcy5nZXQoXCJpbmNsdWlyX2RldGFsaGVzXCIpID09PSBcInRydWVcIjtcblxuICAgIGlmICghZW1wcmVzYUlkKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBcIklEIGRhIGVtcHJlc2Egw6kgb2JyaWdhdMOzcmlvXCIgXG4gICAgICB9LCB7IHN0YXR1czogNDAwLCBoZWFkZXJzOiB7IFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlXCIgfSB9KTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgc2UgZW1wcmVzYSBleGlzdGVcbiAgICBjb25zdCB7IGRhdGE6IGVtcHJlc2EsIGVycm9yOiBlbXByZXNhRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImVtcHJlc2FzXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIG5vbWUsIGNucGosIHNldG9yLCBwb3J0ZSwgYXRpdm9cIilcbiAgICAgIC5lcShcImlkXCIsIGVtcHJlc2FJZClcbiAgICAgIC5lcShcImF0aXZvXCIsIHRydWUpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZW1wcmVzYUVycm9yIHx8ICFlbXByZXNhKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBcIkVtcHJlc2EgbsOjbyBlbmNvbnRyYWRhIG91IGluYXRpdmFcIiBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDQsIGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xuICAgIH1cblxuICAgIC8vIERhdGEgZGUgaW7DrWNpbyBwYXJhIGZpbHRyb3NcbiAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoKTtcbiAgICBkYXRhSW5pY2lvLnNldERhdGUoZGF0YUluaWNpby5nZXREYXRlKCkgLSBwYXJzZUludChwZXJpb2RvKSk7XG4gICAgY29uc3QgZGF0YUluaWNpb0lTTyA9IGRhdGFJbmljaW8udG9JU09TdHJpbmcoKTtcblxuICAgIC8vIDEuIEVTVEFUw41TVElDQVMgREUgSk9CUyAoZmlsdHJhZG9zIHBvciBlbXByZXNhKVxuICAgIGNvbnN0IHsgZGF0YTogam9icywgZXJyb3I6IGpvYnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiYW5hbGlzZV9qb2JzXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIHN0YXR1cywgY3JlYXRlZF9hdCwgY29tcGxldGVkX2F0LCBwcm9ncmVzc28sIHRpcG9fYW5hbGlzZVwiKVxuICAgICAgLmVxKFwiZW1wcmVzYV9pZFwiLCBlbXByZXNhSWQpXG4gICAgICAuZ3RlKFwiY3JlYXRlZF9hdFwiLCBkYXRhSW5pY2lvSVNPKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICBpZiAoam9ic0Vycm9yKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBcIkVycm8gYW8gYnVzY2FyIGpvYnNcIiBcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAsIGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xuICAgIH1cblxuICAgIC8vIDIuIEVTVEFUw41TVElDQVMgREUgUkVTVUxUQURPU1xuICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0YWRvcywgZXJyb3I6IHJlc3VsdGFkb3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiYW5hbGlzZV9yZXN1bHRhZG9zXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIHNjb3JlX2dlcmFsLCBuaXZlbF9yaXNjbywgc3RhdHVzX2dlcmFsLCBjcmVhdGVkX2F0LCBtZXRhZGF0YVwiKVxuICAgICAgLmVxKFwiZW1wcmVzYV9pZFwiLCBlbXByZXNhSWQpXG4gICAgICAuZ3RlKFwiY3JlYXRlZF9hdFwiLCBkYXRhSW5pY2lvSVNPKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICBpZiAocmVzdWx0YWRvc0Vycm9yKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBcIkVycm8gYW8gYnVzY2FyIHJlc3VsdGFkb3NcIiBcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAsIGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xuICAgIH1cblxuICAgIC8vIDMuIEdBUFMgREUgQ09ORk9STUlEQURFIChFbnRlcnByaXNlIERlZmVuc2l2ZSBRdWVyeSlcbiAgICBsZXQgZ2FwczogR2FwUm93W10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGdhcHNEYXRhLCBlcnJvcjogZ2Fwc1F1ZXJ5RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY29uZm9ybWlkYWRlX2dhcHNcIilcbiAgICAgICAgLnNlbGVjdChgXG4gICAgICAgICAgaWQsIFxuICAgICAgICAgIHNldmVyaWRhZGUsIFxuICAgICAgICAgIHJlc29sdmlkbywgXG4gICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICBwcmF6b19zdWdlcmlkbyxcbiAgICAgICAgICBhbmFsaXNlX3Jlc3VsdGFkb19pZCxcbiAgICAgICAgICBub3JtYV9pZFxuICAgICAgICBgKVxuICAgICAgICAuZ3RlKFwiY3JlYXRlZF9hdFwiLCBkYXRhSW5pY2lvSVNPKVxuICAgICAgICAub3JkZXIoXCJzZXZlcmlkYWRlXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgICAgaWYgKGdhcHNRdWVyeUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQXZpc286IEdhcHMgcXVlcnkgZmFpbGVkLCBjb250aW51YW5kbyBzZW0gZGFkb3MgZGUgZ2FwczonLCBnYXBzUXVlcnlFcnJvcik7XG4gICAgICAgIGdhcHMgPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdhcHMgPSAoZ2Fwc0RhdGEgfHwgW10pIGFzIEdhcFJvd1tdO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnJpcXVlY2VyIGNvbSBkYWRvcyBkYXMgbm9ybWFzIChkZWZlbnNpdm8pXG4gICAgICBpZiAoZ2Fwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5vcm1hSWRzID0gWy4uLm5ldyBTZXQoZ2Fwcy5tYXAoZyA9PiBnLm5vcm1hX2lkKS5maWx0ZXIoKHYpOiB2IGlzIHN0cmluZyA9PiBCb29sZWFuKHYpKSldO1xuICAgICAgICBpZiAobm9ybWFJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHsgZGF0YTogbm9ybWFzRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKFwibm9ybWFzXCIpXG4gICAgICAgICAgICAuc2VsZWN0KFwiaWQsIGNvZGlnbywgdGl0dWxvXCIpXG4gICAgICAgICAgICAuaW4oXCJpZFwiLCBub3JtYUlkcyk7XG5cbiAgICAgICAgICBjb25zdCBub3JtYXMgPSAobm9ybWFzRGF0YSB8fCBbXSkgYXMgTm9ybWFSZWZbXTtcbiAgICAgICAgICBnYXBzID0gZ2Fwcy5tYXAoZ2FwID0+ICh7XG4gICAgICAgICAgICAuLi5nYXAsXG4gICAgICAgICAgICBub3JtYTogZ2FwLm5vcm1hX2lkID8gbm9ybWFzLmZpbmQobiA9PiBuLmlkID09PSBnYXAubm9ybWFfaWQpIHx8IG51bGwgOiBudWxsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybignQXZpc286IEVycm8gYW8gYnVzY2FyIGdhcHMsIGNvbnRpbnVhbmRvIHNlbSBlc3RlcyBkYWRvczonLCBlcnIpO1xuICAgICAgZ2FwcyA9IFtdO1xuICAgIH1cblxuICAgIC8vIDQuIERPQ1VNRU5UT1MgREEgRU1QUkVTQVxuICAgIGNvbnN0IHsgZGF0YTogZG9jdW1lbnRvcywgZXJyb3I6IGRvY3VtZW50b3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiZG9jdW1lbnRvc19lbXByZXNhXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIG5vbWVfYXJxdWl2bywgdGlwb19kb2N1bWVudG8sIGNyZWF0ZWRfYXRcIilcbiAgICAgIC5lcShcImVtcHJlc2FfaWRcIiwgZW1wcmVzYUlkKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICBpZiAoZG9jdW1lbnRvc0Vycm9yKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBcIkVycm8gYW8gYnVzY2FyIGRvY3VtZW50b3NcIiBcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAsIGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH0pO1xuICAgIH1cblxuICAgIC8vIEPDgUxDVUxPUyBETyBEQVNIQk9BUkRcblxuICAgIGNvbnN0IGpvYnNSb3dzID0gKGpvYnMgfHwgW10pIGFzIEpvYlJvd1tdO1xuICAgIGNvbnN0IHJlc3VsdGFkb3NSb3dzID0gKHJlc3VsdGFkb3MgfHwgW10pIGFzIFJlc3VsdGFkb1Jvd1tdO1xuICAgIGNvbnN0IGRvY3VtZW50b3NSb3dzID0gKGRvY3VtZW50b3MgfHwgW10pIGFzIERvY3VtZW50b1Jvd1tdO1xuXG4gICAgLy8gRXN0YXTDrXN0aWNhcyBkZSBKb2JzXG4gICAgY29uc3QgdG90YWxKb2JzID0gam9ic1Jvd3MubGVuZ3RoO1xuICAgIGNvbnN0IGpvYnNQZW5kZW50ZXMgPSBqb2JzUm93cy5maWx0ZXIoaiA9PiBqLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKS5sZW5ndGg7XG4gICAgY29uc3Qgam9ic1Byb2Nlc3NhbmRvID0gam9ic1Jvd3MuZmlsdGVyKGogPT4gai5zdGF0dXMgPT09ICdydW5uaW5nJykubGVuZ3RoO1xuICAgIGNvbnN0IGpvYnNDb21wbGV0b3MgPSBqb2JzUm93cy5maWx0ZXIoaiA9PiBqLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aDtcbiAgICBjb25zdCBqb2JzRmFsaGFyYW0gPSBqb2JzUm93cy5maWx0ZXIoaiA9PiBqLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpLmxlbmd0aDtcbiAgICBjb25zdCBqb2JzQ2FuY2VsYWRvcyA9IGpvYnNSb3dzLmZpbHRlcihqID0+IGouc3RhdHVzID09PSAnY2FuY2VsbGVkJykubGVuZ3RoO1xuXG4gICAgY29uc3QgdGF4YVN1Y2Vzc28gPSB0b3RhbEpvYnMgPiAwID8gTWF0aC5yb3VuZCgoam9ic0NvbXBsZXRvcyAvIHRvdGFsSm9icykgKiAxMDApIDogMDtcblxuICAgIGNvbnN0IGpvYnNDb21UZW1wbyA9IGpvYnNSb3dzLmZpbHRlcihqID0+IGouY29tcGxldGVkX2F0ICYmIGouY3JlYXRlZF9hdCk7XG4gICAgY29uc3QgdGVtcG9NZWRpbyA9IGpvYnNDb21UZW1wby5sZW5ndGggPiAwIFxuICAgICAgPyBNYXRoLnJvdW5kKGpvYnNDb21UZW1wby5yZWR1Y2UoKGFjYywgam9iKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW5pY2lvID0gbmV3IERhdGUoam9iLmNyZWF0ZWRfYXQpLmdldFRpbWUoKTtcbiAgICAgICAgICBjb25zdCBmaW0gPSBuZXcgRGF0ZShqb2IuY29tcGxldGVkX2F0IGFzIHN0cmluZykuZ2V0VGltZSgpO1xuICAgICAgICAgIHJldHVybiBhY2MgKyAoZmltIC0gaW5pY2lvKSAvIDEwMDA7XG4gICAgICAgIH0sIDApIC8gam9ic0NvbVRlbXBvLmxlbmd0aClcbiAgICAgIDogMDtcblxuICAgIC8vIEVzdGF0w61zdGljYXMgZGUgQ29uZm9ybWlkYWRlXG4gICAgY29uc3QgdG90YWxBbmFsaXNlcyA9IHJlc3VsdGFkb3NSb3dzLmxlbmd0aDtcbiAgICBjb25zdCBzY29yZUdlcmFsID0gdG90YWxBbmFsaXNlcyA+IDAgXG4gICAgICA/IE1hdGgucm91bmQocmVzdWx0YWRvc1Jvd3MucmVkdWNlKChhY2MsIHIpID0+IGFjYyArIChyLnNjb3JlX2dlcmFsIHx8IDApLCAwKSAvIHRvdGFsQW5hbGlzZXMpXG4gICAgICA6IDA7XG5cbiAgICBjb25zdCBjb25mb3JtZXMgPSByZXN1bHRhZG9zUm93cy5maWx0ZXIociA9PiByLnN0YXR1c19nZXJhbCA9PT0gJ2NvbmZvcm1lJykubGVuZ3RoO1xuICAgIGNvbnN0IG5hb0NvbmZvcm1lcyA9IHJlc3VsdGFkb3NSb3dzLmZpbHRlcihyID0+IHIuc3RhdHVzX2dlcmFsID09PSAnbmFvX2NvbmZvcm1lJykubGVuZ3RoO1xuICAgIGNvbnN0IHBhcmNpYWxDb25mb3JtZXMgPSByZXN1bHRhZG9zUm93cy5maWx0ZXIociA9PiByLnN0YXR1c19nZXJhbCA9PT0gJ3BhcmNpYWxfY29uZm9ybWUnKS5sZW5ndGg7XG5cbiAgICBjb25zdCByaXNjb0JhaXhvID0gcmVzdWx0YWRvc1Jvd3MuZmlsdGVyKHIgPT4gci5uaXZlbF9yaXNjbyA9PT0gJ2JhaXhvJykubGVuZ3RoO1xuICAgIGNvbnN0IHJpc2NvTWVkaW8gPSByZXN1bHRhZG9zUm93cy5maWx0ZXIociA9PiByLm5pdmVsX3Jpc2NvID09PSAnbWVkaW8nKS5sZW5ndGg7XG4gICAgY29uc3QgcmlzY29BbHRvID0gcmVzdWx0YWRvc1Jvd3MuZmlsdGVyKHIgPT4gci5uaXZlbF9yaXNjbyA9PT0gJ2FsdG8nKS5sZW5ndGg7XG4gICAgY29uc3QgcmlzY29Dcml0aWNvID0gcmVzdWx0YWRvc1Jvd3MuZmlsdGVyKHIgPT4gci5uaXZlbF9yaXNjbyA9PT0gJ2NyaXRpY28nKS5sZW5ndGg7XG5cbiAgICAvLyBFc3RhdMOtc3RpY2FzIGRlIEdhcHMgKHVzYW5kbyBkYWRvcyBkZSBhbGVydGFzIGNvbW8gZmFsbGJhY2spXG4gICAgbGV0IHRvdGFsR2FwcyA9IGdhcHMubGVuZ3RoO1xuICAgIGxldCBnYXBzUmVzb2x2aWRvcyA9IGdhcHMuZmlsdGVyKGcgPT4gZy5yZXNvbHZpZG8pLmxlbmd0aDtcbiAgICBsZXQgZ2Fwc1BlbmRlbnRlcyA9IHRvdGFsR2FwcyAtIGdhcHNSZXNvbHZpZG9zO1xuXG4gICAgbGV0IGdhcHNDcml0aWNvcyA9IGdhcHMuZmlsdGVyKGcgPT4gZy5zZXZlcmlkYWRlID09PSAnY3JpdGljYScpLmxlbmd0aDtcbiAgICBsZXQgZ2Fwc0FsdG9zID0gZ2Fwcy5maWx0ZXIoZyA9PiBnLnNldmVyaWRhZGUgPT09ICdhbHRhJykubGVuZ3RoO1xuICAgIGxldCBnYXBzTWVkaW9zID0gZ2Fwcy5maWx0ZXIoZyA9PiBnLnNldmVyaWRhZGUgPT09ICdtZWRpYScpLmxlbmd0aDtcbiAgICBsZXQgZ2Fwc0JhaXhvcyA9IGdhcHMuZmlsdGVyKGcgPT4gZy5zZXZlcmlkYWRlID09PSAnYmFpeGEnKS5sZW5ndGg7XG5cbiAgICAvLyBVc2FyIGRhZG9zIGRlIGFsZXJ0YXMgY29tbyBmb250ZSBwcmluY2lwYWwgKG1haXMgY29uZmnDoXZlbClcbiAgICBjb25zdCB7IGRhdGE6IGFsZXJ0YXNEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhbGVydGFzX2NvbmZvcm1pZGFkZVwiKVxuICAgICAgLnNlbGVjdChcInNldmVyaWRhZGUsIHN0YXR1c1wiKVxuICAgICAgLmVxKFwiZW1wcmVzYV9pZFwiLCBlbXByZXNhSWQpO1xuXG4gICAgaWYgKGFsZXJ0YXNEYXRhICYmIGFsZXJ0YXNEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIHRvdGFsR2FwcyA9IGFsZXJ0YXNEYXRhLmxlbmd0aDtcbiAgICAgIGdhcHNSZXNvbHZpZG9zID0gYWxlcnRhc0RhdGEuZmlsdGVyKGEgPT4gYS5zdGF0dXMgPT09ICdyZXNvbHZpZG8nKS5sZW5ndGg7XG4gICAgICBnYXBzUGVuZGVudGVzID0gYWxlcnRhc0RhdGEuZmlsdGVyKGEgPT4gYS5zdGF0dXMgPT09ICdhdGl2bycpLmxlbmd0aDtcblxuICAgICAgZ2Fwc0NyaXRpY29zID0gYWxlcnRhc0RhdGEuZmlsdGVyKGEgPT4gYS5zZXZlcmlkYWRlID09PSAnY3JpdGljYScpLmxlbmd0aDtcbiAgICAgIGdhcHNBbHRvcyA9IGFsZXJ0YXNEYXRhLmZpbHRlcihhID0+IGEuc2V2ZXJpZGFkZSA9PT0gJ2FsdGEnKS5sZW5ndGg7XG4gICAgICBnYXBzTWVkaW9zID0gYWxlcnRhc0RhdGEuZmlsdGVyKGEgPT4gYS5zZXZlcmlkYWRlID09PSAnbWVkaWEnKS5sZW5ndGg7XG4gICAgICBnYXBzQmFpeG9zID0gYWxlcnRhc0RhdGEuZmlsdGVyKGEgPT4gYS5zZXZlcmlkYWRlID09PSAnYmFpeGEnKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgY29uc3QgZ2Fwc1BvckNhdGVnb3JpYTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IGdhcHMucmVkdWNlKChhY2MsIGdhcCkgPT4ge1xuICAgICAgY29uc3QgY2F0ZWdvcmlhID0gZ2FwLmNhdGVnb3JpYSB8fCAnU2VtIGNhdGVnb3JpYSc7XG4gICAgICBhY2NbY2F0ZWdvcmlhXSA9IChhY2NbY2F0ZWdvcmlhXSB8fCAwKSArIDE7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pO1xuXG4gICAgY29uc3QgdWx0aW1vc1Jlc3VsdGFkb3MgPSByZXN1bHRhZG9zUm93cy5zbGljZSgwLCAxMCk7XG4gICAgY29uc3QgdGVuZGVuY2lhU2NvcmUgPSB1bHRpbW9zUmVzdWx0YWRvcy5tYXAociA9PiAoe1xuICAgICAgZGF0YTogci5jcmVhdGVkX2F0LFxuICAgICAgc2NvcmU6IHIuc2NvcmVfZ2VyYWwgfHwgMCxcbiAgICAgIG5pdmVsX3Jpc2NvOiByLm5pdmVsX3Jpc2NvXG4gICAgfSkpO1xuXG4gICAgY29uc3QgZG9jdW1lbnRvc1BvclRpcG86IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSBkb2N1bWVudG9zUm93cy5yZWR1Y2UoKGFjYywgZG9jKSA9PiB7XG4gICAgICBhY2NbZG9jLnRpcG9fZG9jdW1lbnRvXSA9IChhY2NbZG9jLnRpcG9fZG9jdW1lbnRvXSB8fCAwKSArIDE7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pO1xuXG4gICAgLy8gRGFzaGJvYXJkIGNvbnNvbGlkYWRvXG4gICAgY29uc3QgZGFzaGJvYXJkID0ge1xuICAgICAgZW1wcmVzYSxcbiAgICAgIHBlcmlvZG9fZGlhczogcGFyc2VJbnQocGVyaW9kbyksXG4gICAgICBkYXRhX2luaWNpbzogZGF0YUluaWNpb0lTTyxcbiAgICAgIHVsdGltYV9hdHVhbGl6YWNhbzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXG4gICAgICByZXN1bW9fZXhlY3V0aXZvOiB7XG4gICAgICAgIHNjb3JlX2dlcmFsX21lZGlvOiBzY29yZUdlcmFsLFxuICAgICAgICB0b3RhbF9hbmFsaXNlczogdG90YWxBbmFsaXNlcyxcbiAgICAgICAgdG90YWxfZ2FwczogdG90YWxHYXBzLFxuICAgICAgICBnYXBzX2NyaXRpY29zX3BlbmRlbnRlczogZ2Fwcy5maWx0ZXIoZyA9PiBnLnNldmVyaWRhZGUgPT09ICdjcml0aWNhJyAmJiAhZy5yZXNvbHZpZG8pLmxlbmd0aCxcbiAgICAgICAgdGF4YV9yZXNvbHVjYW9fZ2FwczogdG90YWxHYXBzID4gMCA/IE1hdGgucm91bmQoKGdhcHNSZXNvbHZpZG9zIC8gdG90YWxHYXBzKSAqIDEwMCkgOiAwLFxuICAgICAgICByaXNjb19wcmVkb21pbmFudGU6IGdldFJpc2NvUHJlZG9taW5hbnRlKHJpc2NvQmFpeG8sIHJpc2NvTWVkaW8sIHJpc2NvQWx0bywgcmlzY29Dcml0aWNvKVxuICAgICAgfSxcblxuICAgICAgcHJvY2Vzc2FtZW50bzoge1xuICAgICAgICB0b3RhbF9qb2JzOiB0b3RhbEpvYnMsXG4gICAgICAgIGpvYnNfcGVuZGVudGVzOiBqb2JzUGVuZGVudGVzLFxuICAgICAgICBqb2JzX3Byb2Nlc3NhbmRvOiBqb2JzUHJvY2Vzc2FuZG8sXG4gICAgICAgIGpvYnNfY29tcGxldG9zOiBqb2JzQ29tcGxldG9zLFxuICAgICAgICBqb2JzX2ZhbGhhcmFtOiBqb2JzRmFsaGFyYW0sXG4gICAgICAgIGpvYnNfY2FuY2VsYWRvczogam9ic0NhbmNlbGFkb3MsXG4gICAgICAgIHRheGFfc3VjZXNzb19wZXJjZW50dWFsOiB0YXhhU3VjZXNzbyxcbiAgICAgICAgdGVtcG9fbWVkaW9fcHJvY2Vzc2FtZW50b19zZWd1bmRvczogdGVtcG9NZWRpbyxcbiAgICAgICAgdGVtcG9fbWVkaW9fZm9ybWF0YWRvOiBmb3JtYXRhclRlbXBvKHRlbXBvTWVkaW8pXG4gICAgICB9LFxuXG4gICAgICBjb25mb3JtaWRhZGU6IHtcbiAgICAgICAgdG90YWxfYW5hbGlzZXM6IHRvdGFsQW5hbGlzZXMsXG4gICAgICAgIHNjb3JlX21lZGlvOiBzY29yZUdlcmFsLFxuICAgICAgICBkaXN0cmlidWljYW9fc3RhdHVzOiB7XG4gICAgICAgICAgY29uZm9ybWU6IGNvbmZvcm1lcyxcbiAgICAgICAgICBuYW9fY29uZm9ybWU6IG5hb0NvbmZvcm1lcyxcbiAgICAgICAgICBwYXJjaWFsX2NvbmZvcm1lOiBwYXJjaWFsQ29uZm9ybWVzXG4gICAgICAgIH0sXG4gICAgICAgIGRpc3RyaWJ1aWNhb19yaXNjbzoge1xuICAgICAgICAgIGJhaXhvOiByaXNjb0JhaXhvLFxuICAgICAgICAgIG1lZGlvOiByaXNjb01lZGlvLFxuICAgICAgICAgIGFsdG86IHJpc2NvQWx0byxcbiAgICAgICAgICBjcml0aWNvOiByaXNjb0NyaXRpY29cbiAgICAgICAgfSxcbiAgICAgICAgdGVuZGVuY2lhX3Njb3JlOiB0ZW5kZW5jaWFTY29yZVxuICAgICAgfSxcblxuICAgICAgZ2Fwczoge1xuICAgICAgICB0b3RhbDogdG90YWxHYXBzLFxuICAgICAgICByZXNvbHZpZG9zOiBnYXBzUmVzb2x2aWRvcyxcbiAgICAgICAgcGVuZGVudGVzOiBnYXBzUGVuZGVudGVzLFxuICAgICAgICB0YXhhX3Jlc29sdWNhb19wZXJjZW50dWFsOiB0b3RhbEdhcHMgPiAwID8gTWF0aC5yb3VuZCgoZ2Fwc1Jlc29sdmlkb3MgLyB0b3RhbEdhcHMpICogMTAwKSA6IDAsXG4gICAgICAgIGRpc3RyaWJ1aWNhb19zZXZlcmlkYWRlOiB7XG4gICAgICAgICAgY3JpdGljYTogZ2Fwc0NyaXRpY29zLFxuICAgICAgICAgIGFsdGE6IGdhcHNBbHRvcyxcbiAgICAgICAgICBtZWRpYTogZ2Fwc01lZGlvcyxcbiAgICAgICAgICBiYWl4YTogZ2Fwc0JhaXhvc1xuICAgICAgICB9LFxuICAgICAgICBwb3JfY2F0ZWdvcmlhOiBnYXBzUG9yQ2F0ZWdvcmlhXG4gICAgICB9LFxuXG4gICAgICBkb2N1bWVudG9zOiB7XG4gICAgICAgIHRvdGFsOiBkb2N1bWVudG9zUm93cy5sZW5ndGgsXG4gICAgICAgIHBvcl90aXBvOiBkb2N1bWVudG9zUG9yVGlwb1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgc3VjY2VzczogdHJ1ZSBhcyBjb25zdCxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgLi4uZGFzaGJvYXJkLFxuICAgICAgICAuLi4oaW5jbHVpckRldGFsaGVzXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGRldGFsaGVzOiB7XG4gICAgICAgICAgICAgICAgam9ic19yZWNlbnRlczogam9ic1Jvd3Muc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICAgIHJlc3VsdGFkb3NfcmVjZW50ZXM6IHJlc3VsdGFkb3NSb3dzLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgICBnYXBzX2NyaXRpY29zX3BlbmRlbnRlczogZ2Fwcy5maWx0ZXIoZyA9PiBnLnNldmVyaWRhZGUgPT09ICdjcml0aWNhJyAmJiAhZy5yZXNvbHZpZG8pLnNsaWNlKDAsIDIwKSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudG9zX3JlY2VudGVzOiBkb2N1bWVudG9zUm93cy5zbGljZSgwLCAxMClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge30pXG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgY29uc29sZS5sb2coYERhc2hib2FyZCBBUEkgcmVzcG9uc2UgdGltZTogJHtyZXNwb25zZVRpbWV9bXMgZm9yIGVtcHJlc2EgJHtlbXByZXNhSWR9YCk7XG4gICAgXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24ocGF5bG9hZCwge1xuICAgICAgaGVhZGVyczogeyBcbiAgICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwicHVibGljLCBzLW1heGFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT0zMDBcIixcbiAgICAgICAgXCJYLVJlc3BvbnNlLVRpbWVcIjogYCR7cmVzcG9uc2VUaW1lfW1zYFxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJybyBubyBkYXNoYm9hcmQgZGUgY29uZm9ybWlkYWRlOicsIGVycm9yKTtcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgZXJyb3I6IFwiRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yXCIgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCwgaGVhZGVyczogeyBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiIH0gfSk7XG4gIH1cbn1cblxuLy8gRnVuw6fDtWVzIHV0aWxpdMOhcmlhc1xuZnVuY3Rpb24gZ2V0UmlzY29QcmVkb21pbmFudGUoYmFpeG86IG51bWJlciwgbWVkaW86IG51bWJlciwgYWx0bzogbnVtYmVyLCBjcml0aWNvOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCByaXNjb3MgPSB7IGJhaXhvLCBtZWRpbywgYWx0bywgY3JpdGljbyB9O1xuICBjb25zdCBtYWlvclJpc2NvID0gT2JqZWN0LmVudHJpZXMocmlzY29zKS5yZWR1Y2UoKGEsIGIpID0+IGFbMV0gPiBiWzFdID8gYSA6IGIpO1xuICByZXR1cm4gbWFpb3JSaXNjb1swXTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0YXJUZW1wbyhzZWd1bmRvczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKHNlZ3VuZG9zID09PSAwKSByZXR1cm4gXCIwc1wiO1xuICBcbiAgY29uc3QgaG9yYXMgPSBNYXRoLmZsb29yKHNlZ3VuZG9zIC8gMzYwMCk7XG4gIGNvbnN0IG1pbnV0b3MgPSBNYXRoLmZsb29yKChzZWd1bmRvcyAlIDM2MDApIC8gNjApO1xuICBjb25zdCBzZWdzID0gc2VndW5kb3MgJSA2MDtcblxuICBpZiAoaG9yYXMgPiAwKSB7XG4gICAgcmV0dXJuIGAke2hvcmFzfWggJHttaW51dG9zfW1gO1xuICB9IGVsc2UgaWYgKG1pbnV0b3MgPiAwKSB7XG4gICAgcmV0dXJuIGAke21pbnV0b3N9bSAke3NlZ3N9c2A7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke3NlZ3N9c2A7XG4gIH1cbn0iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJyZXZhbGlkYXRlIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJlbXByZXNhSWQiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJwZXJpb2RvIiwiZ2V0IiwiaW5jbHVpckRldGFsaGVzIiwiUmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwiaGVhZGVycyIsImRhdGEiLCJlbXByZXNhIiwiZW1wcmVzYUVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiZGF0YUluaWNpbyIsInNldERhdGUiLCJnZXREYXRlIiwicGFyc2VJbnQiLCJkYXRhSW5pY2lvSVNPIiwidG9JU09TdHJpbmciLCJqb2JzIiwiam9ic0Vycm9yIiwiZ3RlIiwib3JkZXIiLCJhc2NlbmRpbmciLCJyZXN1bHRhZG9zIiwicmVzdWx0YWRvc0Vycm9yIiwiZ2FwcyIsImdhcHNEYXRhIiwiZ2Fwc1F1ZXJ5RXJyb3IiLCJjb25zb2xlIiwid2FybiIsImxlbmd0aCIsIm5vcm1hSWRzIiwiU2V0IiwibWFwIiwiZyIsIm5vcm1hX2lkIiwiZmlsdGVyIiwidiIsIkJvb2xlYW4iLCJub3JtYXNEYXRhIiwiaW4iLCJub3JtYXMiLCJnYXAiLCJub3JtYSIsImZpbmQiLCJuIiwiaWQiLCJlcnIiLCJkb2N1bWVudG9zIiwiZG9jdW1lbnRvc0Vycm9yIiwiam9ic1Jvd3MiLCJyZXN1bHRhZG9zUm93cyIsImRvY3VtZW50b3NSb3dzIiwidG90YWxKb2JzIiwiam9ic1BlbmRlbnRlcyIsImoiLCJqb2JzUHJvY2Vzc2FuZG8iLCJqb2JzQ29tcGxldG9zIiwiam9ic0ZhbGhhcmFtIiwiam9ic0NhbmNlbGFkb3MiLCJ0YXhhU3VjZXNzbyIsIk1hdGgiLCJyb3VuZCIsImpvYnNDb21UZW1wbyIsImNvbXBsZXRlZF9hdCIsImNyZWF0ZWRfYXQiLCJ0ZW1wb01lZGlvIiwicmVkdWNlIiwiYWNjIiwiam9iIiwiaW5pY2lvIiwiZ2V0VGltZSIsImZpbSIsInRvdGFsQW5hbGlzZXMiLCJzY29yZUdlcmFsIiwiciIsInNjb3JlX2dlcmFsIiwiY29uZm9ybWVzIiwic3RhdHVzX2dlcmFsIiwibmFvQ29uZm9ybWVzIiwicGFyY2lhbENvbmZvcm1lcyIsInJpc2NvQmFpeG8iLCJuaXZlbF9yaXNjbyIsInJpc2NvTWVkaW8iLCJyaXNjb0FsdG8iLCJyaXNjb0NyaXRpY28iLCJ0b3RhbEdhcHMiLCJnYXBzUmVzb2x2aWRvcyIsInJlc29sdmlkbyIsImdhcHNQZW5kZW50ZXMiLCJnYXBzQ3JpdGljb3MiLCJzZXZlcmlkYWRlIiwiZ2Fwc0FsdG9zIiwiZ2Fwc01lZGlvcyIsImdhcHNCYWl4b3MiLCJhbGVydGFzRGF0YSIsImEiLCJnYXBzUG9yQ2F0ZWdvcmlhIiwiY2F0ZWdvcmlhIiwidWx0aW1vc1Jlc3VsdGFkb3MiLCJzbGljZSIsInRlbmRlbmNpYVNjb3JlIiwic2NvcmUiLCJkb2N1bWVudG9zUG9yVGlwbyIsImRvYyIsInRpcG9fZG9jdW1lbnRvIiwiZGFzaGJvYXJkIiwicGVyaW9kb19kaWFzIiwiZGF0YV9pbmljaW8iLCJ1bHRpbWFfYXR1YWxpemFjYW8iLCJyZXN1bW9fZXhlY3V0aXZvIiwic2NvcmVfZ2VyYWxfbWVkaW8iLCJ0b3RhbF9hbmFsaXNlcyIsInRvdGFsX2dhcHMiLCJnYXBzX2NyaXRpY29zX3BlbmRlbnRlcyIsInRheGFfcmVzb2x1Y2FvX2dhcHMiLCJyaXNjb19wcmVkb21pbmFudGUiLCJnZXRSaXNjb1ByZWRvbWluYW50ZSIsInByb2Nlc3NhbWVudG8iLCJ0b3RhbF9qb2JzIiwiam9ic19wZW5kZW50ZXMiLCJqb2JzX3Byb2Nlc3NhbmRvIiwiam9ic19jb21wbGV0b3MiLCJqb2JzX2ZhbGhhcmFtIiwiam9ic19jYW5jZWxhZG9zIiwidGF4YV9zdWNlc3NvX3BlcmNlbnR1YWwiLCJ0ZW1wb19tZWRpb19wcm9jZXNzYW1lbnRvX3NlZ3VuZG9zIiwidGVtcG9fbWVkaW9fZm9ybWF0YWRvIiwiZm9ybWF0YXJUZW1wbyIsImNvbmZvcm1pZGFkZSIsInNjb3JlX21lZGlvIiwiZGlzdHJpYnVpY2FvX3N0YXR1cyIsImNvbmZvcm1lIiwibmFvX2NvbmZvcm1lIiwicGFyY2lhbF9jb25mb3JtZSIsImRpc3RyaWJ1aWNhb19yaXNjbyIsImJhaXhvIiwibWVkaW8iLCJhbHRvIiwiY3JpdGljbyIsInRlbmRlbmNpYV9zY29yZSIsInRvdGFsIiwicmVzb2x2aWRvcyIsInBlbmRlbnRlcyIsInRheGFfcmVzb2x1Y2FvX3BlcmNlbnR1YWwiLCJkaXN0cmlidWljYW9fc2V2ZXJpZGFkZSIsImNyaXRpY2EiLCJhbHRhIiwibWVkaWEiLCJiYWl4YSIsInBvcl9jYXRlZ29yaWEiLCJwb3JfdGlwbyIsInBheWxvYWQiLCJkZXRhbGhlcyIsImpvYnNfcmVjZW50ZXMiLCJyZXN1bHRhZG9zX3JlY2VudGVzIiwiZG9jdW1lbnRvc19yZWNlbnRlcyIsInJlc3BvbnNlVGltZSIsImxvZyIsInJpc2NvcyIsIm1haW9yUmlzY28iLCJPYmplY3QiLCJlbnRyaWVzIiwiYiIsInNlZ3VuZG9zIiwiaG9yYXMiLCJmbG9vciIsIm1pbnV0b3MiLCJzZWdzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/conformidade/dashboard/[empresaId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _barrel_optimize_names_createClient_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! __barrel_optimize__?names=createClient!=!@supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://kqdilsmgjlgmqcoubpel.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtxZGlsc21namxnbXFjb3VicGVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0OTE0ODQsImV4cCI6MjA3MjA2NzQ4NH0.vEI6xTFxM8wyhpBL2gRaBUuhBt8ulRWCQHNaEJj-ld4\";\nconst supabase = (0,_barrel_optimize_names_createClient_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxjQUFjSCxrTkFBeUM7QUFFdEQsTUFBTUssV0FBV1Asc0dBQVlBLENBQUNDLGFBQWFJLGFBQVkiLCJzb3VyY2VzIjpbIi9ob21lL2JydW5vYWRzYmEvc2duL3NyYy9saWIvc3VwYWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCFcbmNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhXG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&page=%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fconformidade%2Fdashboard%2F%5BempresaId%5D%2Froute.ts&appDir=%2Fhome%2Fbrunoadsba%2Fsgn%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fbrunoadsba%2Fsgn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();